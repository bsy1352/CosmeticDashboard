@{
    ViewData["Title"] = "로그인";
}
@model CosmeticDashboard.ViewModel.LoginViewModel
@using Microsoft.AspNetCore.Mvc

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.3/jquery.min.js"></script>


<div class="modal fade" id="myModal" role="dialog"></div>

<h2>로그인</h2>

<form method="post" asp-controller="Account" asp-action="Login" data-ajax-url="/Account/Login" data-ajax="true" data-ajax-method="post">
    
    <div class="form-group">
        <label>사용자 ID       </label><span class="text-danger" asp-validation-for="UserId"></span>
        <input type="text" asp-for="UserId" class="form-control" placeholder="사용자 ID 입력" autocomplete="off" />
    </div>

    <div class="form-group">
        <label>비밀번호         </label><span class="text-danger" asp-validation-for="UserPassword"></span>
        <input type="password" asp-for="UserPassword" class="form-control" placeholder="비밀번호 입력" autocomplete="off" />
    </div>

    <div class="form-group">
        <button type="submit" id="submitbutton" class="btn btn-success">로그인</button>
    </div>
</form>

@section scripts{
    <script src="~/lib/jquery-ajax-unobtrusive/jquery.unobtrusive-ajax.min.js"></script>
    <script type="text/javascript">
        @*//$("#myModal").load('@Url.Action("LoginFailure", "Account")');


        $.get("@Url.Action("LoginFailure", "Account")", function (data) {
            $("#myModal").html(data);
        });*@
       
        //$(document).ready(function () {

        //    $("#myModal").modal('show');
                

        ////        $(document).on('click', '#btnHideModal', function () {
        ////            $("#myModal").modal('hide');
        ////        });

            
        $(document).ready(function () {
            
            $.ajax({
                url: '/Account/LoginFailure',
                type: 'GET',
                async: false,
                dataType: "html"
            })
                .done(function (result) {
                    $('#myModal').html(result);

                });

            
        });

        $('form').submit(function (e) {
            e.preventDefault();
                $.ajax({
                    url: '/Account/Login',
                    type: 'POST',
                    async: false,
                    dataType: "html",
                })
                    .done(function () {
                       
                        $('#myModal').modal('show');
                        
                    });
            });

    </script>
}

@*<div class="container">
        <div class="modal fade" tabindex="-1" id="LoginFailure"
             data-keyboard="false" data-backdrop="static">
            <div class="modal-dialog modal-lg">
                <div class="modal-content">
                    <div class="modal-header">
                        <h4 class="modal-title">로그인 실패</h4>
                    </div>
                    <div class="modal-body">
                        <form>
                            <div class="form-group">
                                <p>아이디 혹은 비밀번호를 잘못 입력하셨습니다. </p>
                            </div>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button type="button" id="btnHideModal" class="btn btn-primary button button4">
                            닫기
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>*@

@*<script type="text/javascript">

            $(document).ready(function () {
                $.ajax({
                url: '@Url.Action("LoginFailure", "Account")',
                type: 'get',
                success: function (data) {
                    $('div#myModal').html(data);
                    }
                });
            });
    </script>*@

@*@if (TempData.ContainsKey("LoginFailure") && TempData["LoginFailure"].ToString() == "로그인실패")
    {
        <script type="text/javascript">

            $(document).ready(function () {
                $("#LoginFailure").modal('show');
            });

            $("#btnHideModal").click(function () {
                $("#LoginFailure").modal('hide');
            });
        </script>
    }*@



@*@if (TempData.ContainsKey("LoginFailure") && TempData["LoginFailure"].ToString() == "로그인실패")
    {
        <script type="text/javascript">

            $(document).ready(function () {
                $("#LoginFailure").modal('show');
            });

            $("#btnHideModal").click(function () {
                $("#LoginFailure").modal('hide');
            });
        </script>
    }*@
